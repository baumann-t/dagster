# Dagster
FROM python:3.10-slim as dagster

RUN mkdir -p /opt/dagster/dagster_home /opt/dagster/app

RUN pip install dagster-webserver dagster-postgres google-cloud-run

# Copy your code and workspace to /opt/dagster/app
COPY  ./examples/deploy_cloud_run/defs.py  ./examples/deploy_cloud_run/workspace.yaml /opt/dagster/app/

ENV DAGSTER_HOME=/opt/dagster/dagster_home/

# Copy dagster instance YAML to $DAGSTER_HOME
COPY  ./examples/deploy_cloud_run/dagster.yaml /opt/dagster/dagster_home/

EXPOSE 3000
